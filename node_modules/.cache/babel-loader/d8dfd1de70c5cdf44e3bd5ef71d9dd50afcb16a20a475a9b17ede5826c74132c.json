{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, onMounted, nextTick } from 'vue';\nimport { UserFilled, Service } from '@element-plus/icons-vue';\nimport main from \"../api/DeepSeekApi\";\nimport { ElMessage } from \"element-plus\";\nconst messages = ref([]);\nconst userInput = ref('');\nconst loading = ref(false);\nconst messageContainer = ref(null);\nconst scrollToBottom = async () => {\n  await nextTick();\n  const container = messageContainer.value;\n  if (container) {\n    container.scrollTop = container.scrollHeight;\n  }\n};\nconst sendMessage = async () => {\n  if (!userInput.value.trim() || loading.value) return;\n\n  // 添加用户消息\n  messages.value.push({\n    role: 'user',\n    content: userInput.value.trim()\n  });\n  loading.value = true;\n  try {\n    // 调用 API\n    const response = await main(userInput.value.trim());\n\n    // 添加 AI 回复\n    messages.value.push({\n      role: 'assistant',\n      content: response\n    });\n    userInput.value = '';\n    await scrollToBottom();\n  } catch (error) {\n    console.error('发送消息失败:', error);\n    ElMessage.error('发送消息失败，请重试');\n  } finally {\n    loading.value = false;\n  }\n};\nonMounted(() => {\n  // 添加欢迎消息\n  messages.value.push({\n    role: 'assistant',\n    content: '你好！我是 AI 助手，有什么我可以帮你的吗？'\n  });\n});\nexport default {\n  name: 'Chat'\n};","map":{"version":3,"names":["ref","onMounted","nextTick","UserFilled","Service","main","ElMessage","messages","userInput","loading","messageContainer","scrollToBottom","container","value","scrollTop","scrollHeight","sendMessage","trim","push","role","content","response","error","console","name"],"sources":["D:\\nodejs_vue_project\\FrontEndDemo\\src\\views\\Chat.vue"],"sourcesContent":["<template>\r\n  <div class=\"chat-container\">\r\n    <div class=\"chat-box\">\r\n      <div class=\"messages\" ref=\"messageContainer\">\r\n        <div v-for=\"(message, index) in messages\" :key=\"index\"\r\n             :class=\"['message', message.role === 'user' ? 'user-message' : 'ai-message']\">\r\n          <el-avatar :icon=\"message.role === 'user' ? UserFilled : Service\"\r\n                     :class=\"message.role === 'user' ? 'user-avatar' : 'ai-avatar'\" />\r\n          <div class=\"message-content\">{{ message.content }}</div>\r\n        </div>\r\n      </div>\r\n      <div class=\"input-area\">\r\n        <el-input\r\n            v-model=\"userInput\"\r\n            type=\"textarea\"\r\n            :rows=\"3\"\r\n            placeholder=\"请输入您的问题...\"\r\n            @keyup.enter.ctrl=\"sendMessage\"\r\n        />\r\n        <el-button type=\"primary\" :loading=\"loading\" @click=\"sendMessage\">\r\n          发送 (Ctrl + Enter)\r\n        </el-button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, onMounted, nextTick } from 'vue'\r\nimport { UserFilled, Service } from '@element-plus/icons-vue'\r\nimport main from \"../api/DeepSeekApi\"\r\nimport {ElMessage} from \"element-plus\";\r\n\r\nconst messages = ref([])\r\nconst userInput = ref('')\r\nconst loading = ref(false)\r\nconst messageContainer = ref(null)\r\n\r\nconst scrollToBottom = async () => {\r\n  await nextTick()\r\n  const container = messageContainer.value\r\n  if (container) {\r\n    container.scrollTop = container.scrollHeight\r\n  }\r\n}\r\n\r\nconst sendMessage = async () => {\r\n  if (!userInput.value.trim() || loading.value) return\r\n\r\n  // 添加用户消息\r\n  messages.value.push({\r\n    role: 'user',\r\n    content: userInput.value.trim()\r\n  })\r\n\r\n  loading.value = true\r\n  try {\r\n    // 调用 API\r\n    const response = await main(userInput.value.trim())\r\n\r\n    // 添加 AI 回复\r\n    messages.value.push({\r\n      role: 'assistant',\r\n      content: response\r\n    })\r\n\r\n    userInput.value = ''\r\n    await scrollToBottom()\r\n  } catch (error) {\r\n    console.error('发送消息失败:', error)\r\n    ElMessage.error('发送消息失败，请重试')\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\nonMounted(() => {\r\n  // 添加欢迎消息\r\n  messages.value.push({\r\n    role: 'assistant',\r\n    content: '你好！我是 AI 助手，有什么我可以帮你的吗？'\r\n  })\r\n})\r\n\r\nexport default {\r\n  name: 'Chat'\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.chat-container {\r\n  display: flex;\r\n  justify-content: center;\r\n  padding: 20px;\r\n  height: calc(100vh - 80px);\r\n}\r\n\r\n.chat-box {\r\n  width: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  border: 1px solid #dcdfe6;\r\n  border-radius: 8px;\r\n  background-color: #fff;\r\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.messages {\r\n  flex: 1;\r\n  overflow-y: auto;\r\n  padding: 20px;\r\n}\r\n\r\n.message {\r\n  display: flex;\r\n  margin-bottom: 20px;\r\n  align-items: flex-start;\r\n}\r\n\r\n.user-message {\r\n  flex-direction: row-reverse;\r\n}\r\n\r\n.message-content {\r\n  margin: 0 12px;\r\n  padding: 12px;\r\n  border-radius: 8px;\r\n  max-width: 70%;\r\n  word-wrap: break-word;\r\n}\r\n\r\n.user-message .message-content {\r\n  background-color: #409eff;\r\n  color: white;\r\n}\r\n\r\n.ai-message .message-content {\r\n  background-color: #f4f4f5;\r\n  color: #333;\r\n}\r\n\r\n.input-area {\r\n  padding: 20px;\r\n  border-top: 1px solid #dcdfe6;\r\n  display: flex;\r\n  gap: 10px;\r\n}\r\n\r\n.input-area .el-textarea {\r\n  flex: 1;\r\n}\r\n\r\n.user-avatar {\r\n  background-color: #409eff;\r\n  color: white;\r\n}\r\n\r\n.ai-avatar {\r\n  background-color: #67c23a;\r\n  color: white;\r\n}\r\n</style>"],"mappings":";AA4BA,SAASA,GAAG,EAAEC,SAAS,EAAEC,QAAO,QAAS,KAAI;AAC7C,SAASC,UAAU,EAAEC,OAAM,QAAS,yBAAwB;AAC5D,OAAOC,IAAG,MAAO,oBAAmB;AACpC,SAAQC,SAAS,QAAO,cAAc;AAEtC,MAAMC,QAAO,GAAIP,GAAG,CAAC,EAAE;AACvB,MAAMQ,SAAQ,GAAIR,GAAG,CAAC,EAAE;AACxB,MAAMS,OAAM,GAAIT,GAAG,CAAC,KAAK;AACzB,MAAMU,gBAAe,GAAIV,GAAG,CAAC,IAAI;AAEjC,MAAMW,cAAa,GAAI,MAAAA,CAAA,KAAY;EACjC,MAAMT,QAAQ,CAAC;EACf,MAAMU,SAAQ,GAAIF,gBAAgB,CAACG,KAAI;EACvC,IAAID,SAAS,EAAE;IACbA,SAAS,CAACE,SAAQ,GAAIF,SAAS,CAACG,YAAW;EAC7C;AACF;AAEA,MAAMC,WAAU,GAAI,MAAAA,CAAA,KAAY;EAC9B,IAAI,CAACR,SAAS,CAACK,KAAK,CAACI,IAAI,CAAC,KAAKR,OAAO,CAACI,KAAK,EAAE;;EAE9C;EACAN,QAAQ,CAACM,KAAK,CAACK,IAAI,CAAC;IAClBC,IAAI,EAAE,MAAM;IACZC,OAAO,EAAEZ,SAAS,CAACK,KAAK,CAACI,IAAI,CAAC;EAChC,CAAC;EAEDR,OAAO,CAACI,KAAI,GAAI,IAAG;EACnB,IAAI;IACF;IACA,MAAMQ,QAAO,GAAI,MAAMhB,IAAI,CAACG,SAAS,CAACK,KAAK,CAACI,IAAI,CAAC,CAAC;;IAElD;IACAV,QAAQ,CAACM,KAAK,CAACK,IAAI,CAAC;MAClBC,IAAI,EAAE,WAAW;MACjBC,OAAO,EAAEC;IACX,CAAC;IAEDb,SAAS,CAACK,KAAI,GAAI,EAAC;IACnB,MAAMF,cAAc,CAAC;EACvB,EAAE,OAAOW,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,SAAS,EAAEA,KAAK;IAC9BhB,SAAS,CAACgB,KAAK,CAAC,YAAY;EAC9B,UAAU;IACRb,OAAO,CAACI,KAAI,GAAI,KAAI;EACtB;AACF;AAEAZ,SAAS,CAAC,MAAM;EACd;EACAM,QAAQ,CAACM,KAAK,CAACK,IAAI,CAAC;IAClBC,IAAI,EAAE,WAAW;IACjBC,OAAO,EAAE;EACX,CAAC;AACH,CAAC;AAED,eAAe;EACbI,IAAI,EAAE;AACR","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}